<!DOCTYPE html>
<html>
<head>
	<title>Chat do Serramar</title>

	<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js" integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anoynmous"></script>

	<script src="https://cdn.socket.io/4.4.0/socket.io.min.js" integrity="sha384-1fOn6VtTq3PWwfsOrk45LnYcGosJwzMHv+Xh/Jx5303FVOXzEnw0EpLv30mtjmlj" crossorigin="anonymous"></script>


	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>

	<form id="chat">
		<input type="text" name="username" placeholder="Digite seu usuário">
		<div class="messages"></div>
		<input type="text" name="message" placeholder="Digite sua mensagem">

		<button type = "submit">Enviar</button>
	</form>

<script type="text/javascript">
	var socket = io('http://localhost:3000');

	$('#chat').submit(function(event) {
		event.preventDefault();

		var author = $('input[name=username]').val();  //ATRIBUI UMA VARIAVEL QUE RECEBE O VALOR DO FORMULÁRIO "NOME"
		var message =$('input[name=message]').val();   //ATRIBUI UMA VARIAVEL QUE RECEBE O VALOR DO FORMULÁRIO "MESSAGE"	       	 
		if(author.length && message.length){		   //VERIFICA SE OS CAMPOS ESTÃO PREENCHIDOS
			var messageObject = {					   //CRIAÇÃO DE UM OBJETO QUE VAI SE CONECTAR NO WEB SOCKET	
				author:author,
				message:message,
			};

			socket.emit('sendMessage', messageObject);
		}    	
	});
</script>
</body>
</html>